# クイズ解説

## 第1問

* Roleについて「間違っている」記述はどれ？
    * × サーバごとに異なるパラメータで処理を実行できる
    * × 複数のTaskを定義できる
    * ○ 実行対象のサーバを定義できる
    * × 1つのRoleを複数のPlaybookで利用できる

「実行対象のサーバを定義できる」はインベントリの説明です。  
Roleは、ある目的を行えるように複数のTaskをまとめたものです。  
変数を使うことでサーバごとに異なるパラメータで処理を実行できるようにしたり、
複数のPlaybookで再利用できるなどの特徴があります。  


## 第2問

* Roleを利用する「メリットでない」ものはどれ？
    * × 処理内容がわかりやすくなる
    * × 実行時に指定の必要なパラメータがわかりやすくなる
    * × コードを再利用しやすくなる
    * ○ 多くの機能を1つのRoleに一元化できて管理しやすくなる
    * × 機能の拡張がしやすくなる

「多くの機能を1つのRoleに一元化できて管理しやすくなる」というのは間違いです。  
独立度が低くて抽象的な目的のRoleは再利用が困難になってしまいます。  
そのため、独立度の高いシンプルな機能のRoleを複数作る方が管理しやすくなります。


## 第3問

* Role作成時に注意することはどれ？
    * × なるべく目的の粒度は大きくする
    * × なるべくTaskの個数は少なくする
    * ○ なるべく変数は使わずに固定値を埋め込む
    * × なるべくディレクトリ構成はテンプレート通りにする

「変数は使わずに固定値を埋め込む」ことは必ずしもRoleをシンプルにすることになるとは限りません。  
変更してもよさそうな部分が固定値になっているとなにかしら意図のある実装だと思えてしまい、誤解を与えるコードになってしまいます。  
ただし、推奨値や一般的な値として特定の値を定義しておきたい場合もあります。  
その場合は固定値を埋め込むのではなく、デフォルト値というものを定義することで表現します。  
変数とデフォルトについては後ほど演習で実施します。

また、Roleを作成する際はAnsibleのベストプラクティスと呼ばれるディレクトリ構成に従って作成するのが一般的です。  
一般的な構成に従うことで可読性が高く再利用のしやすいRoleにすることができます。  
ベストプラクティス構成については次のページの演習で実施します。
