# Webサーバを構築するPlaybookを実行する

より実用的なPlaybookとして、Webサーバを構築するPlaybookを実行してみます。

## 事前確認

ターゲットの80番ポートへアクセスし、何も返されてこないことを確認します。

1. コンソール上部にある「`Target01 WebPage`」をクリック
2. Connectingのまま画面が変わらないことを確認し、ウィンドウ（またはタブ）を閉じる
3. 「`Target02 WebPage`」と「`Target03 WebPage`」に関しても同様であること確認する

> ℹ️ 補足  
> 接続中の画面では8082などのポートへアクセスしようとしているように見えますが、これは本演習での環境都合によるものです。  
> コンテナの仕組みを知っている方は察することができるかもしれません。

## Playbookの実行

以下のコマンドを実行してください。  
`ansible-playbook -i inventory playbook_nginx.yaml`{{execute}}

## 実行後の確認

Webサーバが構築され、先程アクセスできなかったページへアクセスが可能になっていることを確認します。

1. コンソール上部にある「`Target01 WebPage`」をクリック
2. 「It works!」と記載されたページが表示されることを確認し、ウィンドウ（またはタブ）を閉じる
3. 「`Target02 WebPage`」と「`Target03 WebPage`」に関しても同様であること確認する

ここで、`Target03 WebPage`のみアクセスに失敗するかと思います。  
なぜ失敗するのか、正しいと思われる原因を以下から選択してください。

>>3号機のみアクセスが失敗する原因は？ <<
( ) 3号機への実行が失敗している
( ) Ansibleはデフォルトで2台までしか同時に実行されない
(*) 3号機へ実行する設定が記載されていない
( ) Firewallでアクセスが禁止されている

また、どうしたら成功するようになると思われるかを以下から選択してください。

>>どうしたら3号機へのアクセスが成功するようになる？ <<
( ) Playbookを実行するコマンドに「-n 3」オプションを追加して再実行する
( ) 3号機にSSH接続して設定を変更する
( ) Playbookのファイルを編集してからPlaybookを再実行する
(*) インベントリファイルを編集してからPlaybookを再実行する
